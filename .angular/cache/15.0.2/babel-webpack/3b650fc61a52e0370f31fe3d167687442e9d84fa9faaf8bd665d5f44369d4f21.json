{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/google-maps\";\nimport * as i4 from \"@angular/material/core\";\nimport * as i5 from \"@angular/material/datepicker\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/select\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/forms\";\nfunction CreateEventComponent_map_marker_77_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"map-marker\", 37);\n    i0.ɵɵlistener(\"click\", function CreateEventComponent_map_marker_77_Template_map_marker_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const markerPosition_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.displayInfo(markerPosition_r3));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const markerPosition_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r2.svgMarker)(\"options\", ctx_r2.markerOptions)(\"position\", markerPosition_r3);\n  }\n}\nexport class CreateEventComponent {\n  constructor(dialogRef, data) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.center = {\n      lat: 39.679884456322554,\n      lng: -75.75457476111104\n    };\n    this.zoom = 16;\n    this.markerOptions = {\n      draggable: false,\n      clickable: true\n    };\n    this.points = [{\n      lat: 39.679884456322554,\n      lng: -75.75457476111104\n    }];\n    this.hour = 0;\n    this.minute = 0;\n    this.ampm = '';\n    this.y = google.maps.InfoWindow;\n    this.event_coordinates = [];\n    this.svgMarker = {\n      path: \"M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z\",\n      fillColor: \"blue\",\n      fillOpacity: 0.8,\n      strokeWeight: 0,\n      rotation: 0,\n      scale: 2,\n      anchor: new google.maps.Point(15, 30)\n    };\n  }\n  onSubmit() {\n    console.log(this.dialogRef);\n  }\n  onNoClick() {\n    this.dialogRef.close();\n  }\n  displayInfo(markerPosition) {\n    console.log(markerPosition);\n  }\n  sendEvent(event) {\n    console.log(event);\n    console.log(this.hour, this.minute, this.ampm);\n    let event_date = new Date(event.date);\n    let test = event_date.toString().slice(0, 16);\n    let minute = this.minute.toString();\n    if (this.minute == 0) {\n      minute = \"00\";\n    }\n    test += \"@ \" + this.hour + \":\" + minute + \" \" + this.ampm;\n    console.log(test);\n    let coords = [this.event_coordinates[0]['lat'], this.event_coordinates[0]['lng']];\n    console.log(event.descritption);\n    let new_event = {\n      dateTimeStart: test,\n      dateTimeEnd: test,\n      title: event.title,\n      creator: this.data.user.firstName + this.data.user.lastName[0],\n      descritption: event.descritption,\n      attendees: JSON.stringify([this.data.user.firstName + this.data.user.lastName[0]]),\n      coordinates: JSON.stringify(coords),\n      tags: '[]',\n      groups: '[]',\n      id: \"\"\n    };\n    console.log(new_event);\n    var formBody = [];\n    for (var property in new_event) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(new_event[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n    formBody = formBody.join(\"&\");\n    let request = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n      },\n      body: formBody\n    };\n    fetch('http://127.0.0.1:3000/api/event', request);\n    console.log(\"Need to wait for db to write new event\");\n    setTimeout(() => {}, 250);\n    console.log(\"Done waiting, now pull!\");\n    this.dialogRef.close();\n  }\n  addMarker(event) {\n    if (event.latLng) this.event_coordinates[0] = event.latLng.toJSON();\n    console.log(this.event_coordinates[0]);\n  }\n  static #_ = this.ɵfac = function CreateEventComponent_Factory(t) {\n    return new (t || CreateEventComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateEventComponent,\n    selectors: [[\"app-create-event\"]],\n    decls: 87,\n    vars: 8,\n    consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col\"], [1, \"text-center\"], [\"eventForm\", \"ngForm\"], [1, \"new_event\"], [\"matInput\", \"\", \"name\", \"title\", \"ngModel\", \"\"], [\"appearance\", \"fill\"], [\"matInput\", \"\", \"name\", \"descritption\", \"ngModel\", \"\"], [\"matInput\", \"\", \"name\", \"date\", \"ngModel\", \"\", 3, \"matDatepicker\"], [\"matIconSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"], [1, \"new_event2\"], [3, \"value\", \"valueChange\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"5\"], [\"value\", \"6\"], [\"value\", \"7\"], [\"value\", \"8\"], [\"value\", \"9\"], [\"value\", \"10\"], [\"value\", \"11\"], [\"value\", \"12\"], [\"value\", \"0\"], [\"value\", \"15\"], [\"value\", \"30\"], [\"value\", \"45\"], [\"value\", \"am\"], [\"value\", \"pm\"], [\"height\", \"30vh\", \"width\", \"100%\", 3, \"center\", \"zoom\", \"mapClick\"], [3, \"icon\", \"options\", \"position\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"list_master\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [3, \"icon\", \"options\", \"position\", \"click\"]],\n    template: function CreateEventComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r6 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"br\");\n        i0.ɵɵelementStart(4, \"h2\", 3);\n        i0.ɵɵtext(5, \"Create Event\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelementStart(7, \"form\", null, 4)(9, \"div\", 5)(10, \"mat-form-field\")(11, \"mat-label\");\n        i0.ɵɵtext(12, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-form-field\", 7)(15, \"mat-label\");\n        i0.ɵɵtext(16, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"textarea\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"mat-form-field\", 7)(19, \"mat-label\");\n        i0.ɵɵtext(20, \"Choose a date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 9)(22, \"mat-datepicker-toggle\", 10)(23, \"mat-datepicker\", null, 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 12)(26, \"mat-form-field\", 7)(27, \"mat-label\");\n        i0.ɵɵtext(28, \"Start Time: Hour\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"mat-select\", 13);\n        i0.ɵɵlistener(\"valueChange\", function CreateEventComponent_Template_mat_select_valueChange_29_listener($event) {\n          return ctx.hour = $event;\n        });\n        i0.ɵɵelementStart(30, \"mat-option\", 14);\n        i0.ɵɵtext(31, \"1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"mat-option\", 15);\n        i0.ɵɵtext(33, \"2\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-option\", 16);\n        i0.ɵɵtext(35, \"3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"mat-option\", 17);\n        i0.ɵɵtext(37, \"4\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"mat-option\", 18);\n        i0.ɵɵtext(39, \"5\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"mat-option\", 19);\n        i0.ɵɵtext(41, \"6\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"mat-option\", 20);\n        i0.ɵɵtext(43, \"7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"mat-option\", 21);\n        i0.ɵɵtext(45, \"8\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"mat-option\", 22);\n        i0.ɵɵtext(47, \"9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"mat-option\", 23);\n        i0.ɵɵtext(49, \"10\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"mat-option\", 24);\n        i0.ɵɵtext(51, \"11\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"mat-option\", 25);\n        i0.ɵɵtext(53, \"12\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(54, \"mat-form-field\", 7)(55, \"mat-label\");\n        i0.ɵɵtext(56, \"Minute\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"mat-select\", 13);\n        i0.ɵɵlistener(\"valueChange\", function CreateEventComponent_Template_mat_select_valueChange_57_listener($event) {\n          return ctx.minute = $event;\n        });\n        i0.ɵɵelementStart(58, \"mat-option\", 26);\n        i0.ɵɵtext(59, \"00\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"mat-option\", 27);\n        i0.ɵɵtext(61, \"15\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"mat-option\", 28);\n        i0.ɵɵtext(63, \"30\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"mat-option\", 29);\n        i0.ɵɵtext(65, \"45\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(66, \"mat-form-field\", 7)(67, \"mat-label\");\n        i0.ɵɵtext(68, \"AM/PM\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"mat-select\", 13);\n        i0.ɵɵlistener(\"valueChange\", function CreateEventComponent_Template_mat_select_valueChange_69_listener($event) {\n          return ctx.ampm = $event;\n        });\n        i0.ɵɵelementStart(70, \"mat-option\", 30);\n        i0.ɵɵtext(71, \"AM\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(72, \"mat-option\", 31);\n        i0.ɵɵtext(73, \"PM\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(74, \"div\");\n        i0.ɵɵtext(75, \" Pick a location\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(76, \"google-map\", 32);\n        i0.ɵɵlistener(\"mapClick\", function CreateEventComponent_Template_google_map_mapClick_76_listener($event) {\n          return ctx.addMarker($event);\n        });\n        i0.ɵɵtemplate(77, CreateEventComponent_map_marker_77_Template, 1, 3, \"map-marker\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(78, \"br\");\n        i0.ɵɵelementStart(79, \"div\", 34)(80, \"div\", 2)(81, \"button\", 35);\n        i0.ɵɵlistener(\"click\", function CreateEventComponent_Template_button_click_81_listener() {\n          i0.ɵɵrestoreView(_r6);\n          const _r0 = i0.ɵɵreference(8);\n          return i0.ɵɵresetView(ctx.sendEvent(_r0.value));\n        });\n        i0.ɵɵtext(82, \"Create Event\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(83, \"div\", 2)(84, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function CreateEventComponent_Template_button_click_84_listener() {\n          return ctx.onNoClick();\n        });\n        i0.ɵɵtext(85, \"Cancel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(86, \"br\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(24);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"matDatepicker\", _r1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r1);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"value\", ctx.hour);\n        i0.ɵɵadvance(28);\n        i0.ɵɵproperty(\"value\", ctx.minute);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"value\", ctx.ampm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"center\", ctx.center)(\"zoom\", ctx.zoom);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.event_coordinates);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.GoogleMap, i3.MapMarker, i4.MatOption, i5.MatDatepicker, i5.MatDatepickerInput, i5.MatDatepickerToggle, i6.MatFormField, i6.MatLabel, i6.MatSuffix, i7.MatInput, i8.MatSelect, i9.MatButton, i10.ɵNgNoValidate, i10.DefaultValueAccessor, i10.NgControlStatus, i10.NgControlStatusGroup, i10.NgModel, i10.NgForm],\n    styles: [\".new_event{overflow:auto;margin-left:auto;margin-right:auto;align-items:center}.example-container{display:flex;flex-direction:column}.new_event>*{width:100%}.new_event2>*{width:33%}button{margin-left:auto;margin-right:auto}\\n\"],\n    encapsulation: 2\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}